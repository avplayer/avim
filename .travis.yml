language: cpp
compiler:
  - clang

before_install:
  - sudo add-apt-repository -y ppa:boost-latest/ppa
  - sudo add-apt-repository -y ppa:smspillaz/cmake-3.0.2
  - sudo add-apt-repository -y ppa:chris-lea/protobuf
  - sudo add-apt-repository -y ppa:canonical-qt5-edgers/qt5-proper
  - sudo add-apt-repository -y ppa:ubuntu-sdk-team/ppa
  - sudo apt-get update
  - sudo apt-get -y purge cmake
  - sudo apt-get -y install -qq cmake
  - sudo apt-get install -qq wget
  - wget http://www.cmake.org/files/v3.1/cmake-3.1.0-Linux-x86_64.tar.gz
  - sudo tar -xvf cmake-3.1.0-Linux-x86_64.tar.gz -C /opt
  - export PATH="/opt/cmake-3.1.0-Linux-x86_64/bin:${PATH}"
  - sudo apt-get install -qq boost1.55 libprotobuf-dev protobuf-compiler
  - sudo apt-get -y install qt5-default libqt5widgets5 qtbase5-dev qt5-qmake
  - mkdir -pv build
  - git submodule update --init

before_script:
  cd build && CXXFLAGS="-I/usr/include/qt5/QtWidgets" /opt/cmake-3.1.0-Linux-x86_64/bin/cmake ..

script:
    - make -j2

notifications:
  email:
    recipients:
    - xosdy.t@gmail.com
    - peter_future@outlook.com
    - 13632323692@139.com
    on_success: change
    on_failure: always

